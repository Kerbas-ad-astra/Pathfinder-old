//This MM patch configures the life support for TAC Life Support.
PATH_HABITATION:NEEDS[TacLifeSupport]
{
	author = Angel-125
	name = Pigpen
	title = Pigpen Recycler
	shortName = Pigpen
	description = Rolling around like a pig in slop, the Pigpen is perfect for recycling your waste products. Good thing it's automated, the stench is, well, something you don't get used to.
	mass = 1.5
	requiredResource = Equipment
	requiredAmount = 600
	templateTags = orbitalWorkshop
	reconfigureSkill = Engineer
	logoPanel = WildBlueIndustries/Pathfinder/Decals/Pigpen
	glowPanel = WildBlueIndustries/Pathfinder/Decals/PigpenGlow
	toolTip = Closed loop life support is never 100% but modules like the Pigpen help close the loop. Keep it fed with waste and power, and get usable resources in return. The exact resources depends upon which life support manufacturer you go with.
	toolTipTitle = Your First Pigpen!

	MODULE
	{
		name = WBIEfficiencyMonitor
		efficiencyType = habitation
		harvestType = 0
	}

	RESOURCE
	{
		name = ElectricCharge
		amount = 200
		maxAmount = 200
		isTweakable = false
	}

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Composter
		StartActionName = Start Composter
		StopActionName = Stop Composter
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Scientist
		EfficiencyBonus = 1
		 
		INPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 1.25
		}

		INPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio = 0.1
		}

		INPUT_RESOURCE
		{
			ResourceName = Minerals
			Ratio = 0.037
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 3.5
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = 1
			DumpExcess = false
		}
	}

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Water Filter
		StartActionName = Start Water Filter
		StopActionName = Stop Water Filter
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Scientist
		EfficiencyBonus = 1
		 
		INPUT_RESOURCE
		{
			ResourceName = WasteWater
			Ratio = 1
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.25
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 1
			DumpExcess = false
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio = 0.0067
			DumpExcess = true
		}

	}

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Cultivator
		StartActionName = Start Cultivator
		StopActionName = Stop Cultivator
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Scientist
		EfficiencyBonus = 1
 
		INPUT_RESOURCE
		{
			ResourceName = Ore
			Ratio = 0.002
		}

		INPUT_RESOURCE
		{
			ResourceName = Minerals
			Ratio = 0.001
		}

		INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = 0.002
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 3.5
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Dirt
			Ratio = 0.00021
			DumpExcess = false
		}
	}

}

@GREENHOUSE[Prairie]:NEEDS[TacLifeSupport]
{
	MODULE
	{
		name = WBIGreenhouse
		ConverterName = Greenhouse
		StartActionName = Start Grenhouse
		StopActionName = Stop Greenhouse
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		Specialty = Scientist
		EfficiencyBonus = 1
		hoursPerCycle = 540 //Number of hours to grow crops
		minimumSuccess = 45
		criticalSuccess = 90
		criticalFail = 20
		cropResource = Food
		cropYield = 51 //You'll have enough to feed 3 kerbals for 90 days
		criticalSuccessBonus = 0.25
		failureLoss = 0.5

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 7
		}

		INPUT_RESOURCE
		{
			ResourceName = CarbonDioxide
			Ratio = 0.00014
		}

		INPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.00000357
		}

		INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = 0.000001
		}

		OUTPUT_RESOURCE
		{
			ResourceName = WasteWater
			Ratio = 0.000001
			DumpExcess = true
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.000115
			DumpExcess = true
		}

		REQUIRED_RESOURCE
		{
			ResourceName = Dirt
			Ratio = 705
		}

	}

	RESOURCE
	{
		name = Oxygen
		amount = 400
		maxAmount = 400
		isTweakable = true
	}

	RESOURCE
	{
		name = CarbonDioxide
		amount = 400
		maxAmount = 400
		isTweakable = true
	}

	RESOURCE
	{
		name = Water
		amount = 400
		maxAmount = 400
		isTweakable = true
	}

	RESOURCE
	{
		name = WasteWater
		amount = 400
		maxAmount = 400
		isTweakable = true
	}

	RESOURCE
	{
		name = Food
		amount = 400
		maxAmount = 400
		isTweakable = true
	}

	RESOURCE
	{
		name = Dirt
		amount = 400
		maxAmount = 400
		isTweakable = true
	}

	RESOURCE
	{
		name = Fertilizer
		amount = 400
		maxAmount = 400
		isTweakable = true
	}
}

@PART[WBI_Chuckwagon]:NEEDS[TacLifeSupport]
{
	@MODULE[WBIMultipurposeStorage]
	{
		resourcesToKeep = Snacks
		@templateNodes = STORAGE_TEMPLATE;GREENHOUSE
	}
}
