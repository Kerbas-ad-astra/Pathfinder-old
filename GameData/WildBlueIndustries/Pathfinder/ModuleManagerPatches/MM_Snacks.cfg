//This MM patch configures Pathfinder's life support systems to use Snacks.
PATH_HABITATION:NEEDS[Snacks]
{
	author = Angel-125
	name = Pigpen
	title = Pigpen Recycler
	shortName = Pigpen
	description = Rolling around like a pig in slop, the Pigpen is perfect for recycling your waste products. Good thing it's automated, the stench is, well, something you don't get used to.
	mass = 1.5
	requiredResource = Equipment
	requiredAmount = 600
	reconfigureSkill = Engineer
	templateTags = orbitalWorkshop
	logoPanel = WildBlueIndustries/Pathfinder/Decals/Pigpen
	glowPanel = WildBlueIndustries/Pathfinder/Decals/PigpenGlow
	toolTip = Closed loop life support is never 100% but modules like the Pigpen help close the loop. Keep it fed with waste and power, and get usable resources in return. The exact resources depends upon which life support manufacturer you go with.
	toolTipTitle = Your First Pigpen!

	MODULE
	{
		name = WBIEfficiencyMonitor
		efficiencyType = habitation
		harvestType = 0
	}

	RESOURCE
	{
		name = ElectricCharge
		amount = 200
		maxAmount = 200
		isTweakable = false
	}

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Composter
		StartActionName = Start Composter
		StopActionName = Stop Composter
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Scientist
		EfficiencyBonus = 1
		 
		INPUT_RESOURCE
		{
			ResourceName = Organics
			Ratio = .002
		}

		INPUT_RESOURCE
		{
			ResourceName = Minerals
			Ratio = .002
		}

		INPUT_RESOURCE
		{
			ResourceName = Dirt
			Ratio = 0.025
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 3.5
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = .002
			DumpExcess = false
		}
	}

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Dirtifier
		StartActionName = Start Dirtifier
		StopActionName = Stop Dirtifier
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Scientist
		EfficiencyBonus = 1
 
		INPUT_RESOURCE
		{
			ResourceName = Ore
			Ratio = 0.002
		}

		INPUT_RESOURCE
		{
			ResourceName = Minerals
			Ratio = 0.001
		}

		INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = 0.002
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 3.5
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Dirt
			Ratio = 0.00021
			DumpExcess = false
		}
	}

	RESOURCE
	{
		name = Organics
		amount = 500
		maxAmount = 500
		isTweakable = false
	}

	RESOURCE
	{
		name = Minerals
		amount = 500
		maxAmount = 500
		isTweakable = false
	}

	RESOURCE
	{
		name = Ore
		amount = 500
		maxAmount = 500
		isTweakable = false
	}

	RESOURCE
	{
		name = Dirt
		amount = 500
		maxAmount = 500
		isTweakable = false
	}

}

@GREENHOUSE[Prairie]:NEEDS[Snacks]
{
	MODULE
	{
		name = WBIGreenhouse
		ConverterName = Greenhouse
		StartActionName = Start Grenhouse
		StopActionName = Stop Greenhouse
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		Specialty = Scientist
		EfficiencyBonus = 1
		hoursPerCycle = 540 //Number of hours to grow crops
		minimumSuccess = 45
		criticalSuccess = 90
		criticalFail = 20
		cropResource = Snacks
		cropYield = 270 //You'll have enough to feed 3 kerbals for 90 days
		criticalSuccessBonus = 0.25
		failureLoss = 0.5

		INPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.0002
		}

		INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = 0.0002
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 6
		}

		INPUT_RESOURCE
		{
			ResourceName = Dirt
			Ratio = 0.00001
		}

		REQUIRED_RESOURCE
		{
			ResourceName = Dirt
			Ratio = 400
		}

	}

	RESOURCE
	{
		name = Fertilizer
		amount = 100
		maxAmount = 100
		isTweakable = true
	}

	RESOURCE
	{
		name = Water
		amount = 100
		maxAmount = 100
		isTweakable = true
	}

	RESOURCE
	{
		name = Dirt
		amount = 100
		maxAmount = 100
		isTweakable = true
	}

}

@PATH_SCIENCE[Watney]:NEEDS[Snacks]
{
	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = O-Chem
		StartActionName = Start O-Chem
		StopActionName = Stop O-Chem
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Engineer
		EfficiencyBonus = 1

 
		INPUT_RESOURCE
		{
			ResourceName = Ore
			Ratio = 0.002
			FlowMode = STAGE_PRIORITY_FLOW
		}

		INPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.002
			FlowMode = STAGE_PRIORITY_FLOW
		}

		INPUT_RESOURCE
		{
			ResourceName = Minerals
			Ratio = 0.002
			FlowMode = STAGE_PRIORITY_FLOW
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 48
		}

		OUTPUT_RESOURCE
		{	
			ResourceName = Organics
			Ratio = 0.0002
			DumpExcess = false
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}
}

@PART[WBI_Outback]:NEEDS[Snacks]
{
	@MODULE[WBIOutback]
	{
		@resourcesToKeep = EVA Propellant;Snacks
	}
}

@PART[WBI_Chuckwagon]:NEEDS[Snacks]
{
	@MODULE[WBIMultipurposeStorage]
	{
		resourcesToKeep = Snacks
		@templateNodes = STORAGE_TEMPLATE;GREENHOUSE
	}

	RESOURCE
	{
		name= Snacks
		amount = 0
		maxAmount = 50
	}
}

@PART[WBI_DocSciLab]:NEEDS[Snacks]
{
	@MODULE[WBIMultipurposeLab]
	{
		resourcesToKeep = Snacks
	}

	RESOURCE
	{
		name= Snacks
		amount = 0
		maxAmount = 100
	}
}

@PART[WBI_Hacienda]:NEEDS[Snacks]
{
	@MODULE[WBIMultipurposeHab]
	{
		resourcesToKeep = Snacks
	}

	RESOURCE
	{
		name= Snacks
		amount = 0
		maxAmount = 200
	}
}

@PART[WBI_Ponderosa]:NEEDS[Snacks]
{
	@MODULE[WBIMultipurposeHab]
	{
		resourcesToKeep = Snacks
	}

	RESOURCE
	{
		name= Snacks
		amount = 0
		maxAmount = 200
	}
}

@PART[WBI_Ponderosa2]:NEEDS[Snacks]
{
	@MODULE[WBIMultipurposeHab]
	{
		resourcesToKeep = Snacks
	}

	RESOURCE
	{
		name= Snacks
		amount = 0
		maxAmount = 200
	}
}

@PART[WBI_Homestead]:NEEDS[Snacks]
{
	@MODULE[WBIMultipurposeHab]
	{
		resourcesToKeep = Snacks
	}

	RESOURCE
	{
		name= Snacks
		amount = 0
		maxAmount = 200
	}
}